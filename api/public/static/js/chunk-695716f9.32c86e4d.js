(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-695716f9"],{"0254":function(t,e,a){},"3d28":function(t,e,a){},"4ed3":function(t,e,a){"use strict";var n=a("0254"),i=a.n(n);i.a},d418:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.conditions}},[a("el-form-item",{attrs:{label:"活动区域"}},[a("el-select",{attrs:{placeholder:"城市"},model:{value:t.conditions.cityId,callback:function(e){t.$set(t.conditions,"cityId",e)},expression:"conditions.cityId"}},t._l(t.conditionsData.cities,function(t){return a("el-option",{attrs:{label:t.cityName,value:t.cityId}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onQuery}},[t._v("查询")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"expand",align:"center",label:"",width:"95"},scopedSlots:t._u([{key:"default",fn:function(t){return a("hotel-detail",{attrs:{data:t.row}})}}])}),t._v(" "),a("el-table-column",{attrs:{type:"index",index:t.indexMethod,align:"center",label:"序号",width:"95"}}),t._v(" "),a("el-table-column",{attrs:{label:"酒店名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.HotelDisplayName)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{"class-name":"status-col",label:"最低价(三个月内)",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        ￥"+t._s(e.row.minPrice.price)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{"class-name":"status-col",label:"最高折扣(三个月内)",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.minPrice.discount>0?a("el-tag",{staticClass:"discountTag",attrs:{color:"#67C23A"}},[t._v("\n          "+t._s(e.row.minPrice.discount)+"%off\n        ")]):t._e(),t._v(" "),0===e.row.minPrice.discount?a("el-tag",{staticClass:"discountTag",attrs:{color:"#909399"}},[t._v("无折扣")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"最低价日期(三个月内)",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{href:e.row.minPrice.url,type:"primary",target:"_blank"}},[t._v(t._s(e.row.minPrice.date))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"page-size":t.pagination.pageSize,"pager-count":9,"current-page":t.pagination.pageNumber,layout:"prev, pager, next",total:t.pagination.total},on:{"current-change":t.pageChange}})],1)},i=[],o=a("b775");function r(t){var e={pagesize:t.pageSize,pagenumber:t.pageNumber,cityId:t.cityId};return Object(o["a"])({url:"/hotels",method:"get",params:e})}function s(){return Object(o["a"])({url:"/cities",method:"get"})}var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{attrs:{gutter:20,type:"flex",justify:"space-around"}},[a("el-col",{attrs:{span:4}},[a("el-image",{attrs:{src:t.data.MainPhotoUrl}}),t._v(" "),a("div",{staticClass:"block"},[a("el-rate",{attrs:{disabled:"","show-score":"",colors:t.colors},model:{value:t.data.StarRating,callback:function(e){t.$set(t.data,"StarRating",e)},expression:"data.StarRating"}})],1),t._v(" "),t._l(t.data.Highlights,function(e){return a("el-tag",{attrs:{type:"success",effect:"plain"}},[t._v(t._s(e.title))])})],2),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-divider",{staticClass:"hotelDetail",attrs:{direction:"vertical"}})],1),t._v(" "),a("el-col",{attrs:{span:16}},[a("ve-line",{attrs:{data:t.chartData,"data-zoom":t.dataZoom,settings:t.chartSettings,events:t.chartEvents,"mark-line":t.markLine,"mark-point":t.markPoint}})],1)],1)},c=[],u=(a("7f7f"),a("55dd"),a("ac6a"),a("8615"),a("c3da")),d=a.n(u),p=(a("95a8"),a("db0e"),{name:"HotelDetail",components:{"ve-line":d.a},props:{data:{type:Object,default:function(){}}},data:function(){var t=this,e=Object.values(this.data.Prices);e.sort(function(t,e){return t.formatDate<e.formatDate?-1:t.formatDate>e.formatDate?1:0});for(var a=[],n=0,i=e;n<i.length;n++){var o=i[n];a.push({"日期":o.formatDate,"价格":Math.round(o.DisplayPrice)})}return this.chartSettings={metrics:["价格"],dimension:["日期"]},this.markLine={data:[{name:"平均线",type:"average"}]},this.markPoint={data:[{name:"最小值",type:"min"}]},this.dataZoom=[{type:"slider",start:0,end:20}],this.chartEvents={click:function(e){window.open("https://www.agoda.com".concat(t.data.Prices[e.name].url))}},{chartData:{columns:["日期","价格","url"],rows:a},colors:["#99A9BF","#F7BA2A","#FF9900"]}}}),f=p,g=(a("ee53"),a("2877")),m=Object(g["a"])(f,l,c,!1,null,"209eefd4",null),h=m.exports,v={components:{HotelDetail:h},filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},data:function(){return{list:null,listLoading:!0,pagination:{pageNumber:1,pageSize:50,total:0},conditionsData:{},conditions:{}}},created:function(){this.initQuery(),this.fetchData()},methods:{initQuery:function(){var t=this;s().then(function(e){t.conditionsData.cities=e.data})},fetchData:function(){var t=this;Object.assign(this.conditions,this.pagination),this.listLoading=!0,r(this.conditions).then(function(e){t.list=e.data.rows,t.pagination.total=e.data.total,t.listLoading=!1})},pageChange:function(t){this.pagination.pageNumber=t,this.fetchData()},onQuery:function(){this.fetchData()},indexMethod:function(t){return 1+t+(this.pagination.pageNumber-1)*this.pagination.pageSize}}},b=v,_=(a("4ed3"),Object(g["a"])(b,n,i,!1,null,null,null));e["default"]=_.exports},ee53:function(t,e,a){"use strict";var n=a("3d28"),i=a.n(n);i.a}}]);